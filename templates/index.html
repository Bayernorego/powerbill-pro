<!DOCTYPE html>
<html lang="en">

<div class="text-center mb-3">
    <img src="{{ url_for('static', filename='logo.png') }}" width="80">
</div>

<h3 class="fw-bold mb-3">Electricity Billing Calculator</h3>
<p class="text-muted">Generate professional electricity invoices instantly.</p>

<head>
    <title>Powerbill pro</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: linear-gradient(135deg, #4e73df, #1cc88a);
            min-height: 100vh;
        }
        .card {
            animation: fadeIn 0.8s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Dark Mode Styles */
body.dark-mode {
    background: #121212 !important;
    color: #f0f0f0 !important;
}

body.dark-mode .card {
    background-color: #1e1e1e !important;
    color: #f0f0f0 !important;
}

body.dark-mode .table {
    background-color: #2c2c2c !important;
    color: #f0f0f0 !important;
}

body.dark-mode .table th,
body.dark-mode .table td {
    color: #f0f0f0 !important;
}

body.dark-mode .btn-primary {
    background-color: #4e73df !important;
    border-color: #4e73df !important;
}

body.dark-mode .btn-outline-light {
    color: #f0f0f0;
    border-color: #f0f0f0;
}

body.dark-mode .alert {
    background-color: #2c2c2c;
    color: #f0f0f0;
    border-color: #444;
}

    </style>
</head>

<body>
    <nav class="navbar navbar-dark bg-primary shadow-sm">

        <div class="container-fluid">
    <button onclick="toggleDarkMode()" class="btn btn-outline-light btn-sm">
        Dark Mode
    </button>

    <span class="navbar-brand mx-auto fw-bold">
        ⚡ PowerBill Pro
    </span>
</div>

    
</nav>


<div class="container mt-5 mb-5">

    <div class="card shadow-lg border-0 rounded-4 p-5">


        <!-- Header -->
        <h2 class="text-center mb-4">⚡ Electricity Billing System</h2>

        
        <!-- User Input Form -->
        <form method="POST">
            <div class="mb-3">
                <label class="form-label">Enter Units Consumed (kWh)</label>
                <input type="number" step="0.01" name="units" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-primary w-100">Calculate Bill</button>
        </form>

        <!-- Alerts -->
        {% if message %}
        <div class="alert alert-success mt-3 alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endif %}

        {% if error %}
        <div class="alert alert-danger mt-3 alert-dismissible fade show" role="alert">
            {{ error }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endif %}

        <!-- Results Section -->
        {% if grand_total %}
        <div class="results mt-4">

            <h5 class="fw-bold mt-4">Invoice Summary</h5>


            <!-- Units Table -->
            <table class="table table-hover mt-3">

                <thead>
                    <tr>
                        <th>Units</th>
                        <th>Rate (₦)</th>
                        <th>Cost (₦)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for u, rate, cost in breakdown %}
                    <tr>
                        <td>{{ u }}</td>
                        <td>{{ rate }}</td>
                        <td>{{ cost }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <hr>

            <!-- Totals Summary -->
            <h4 class="mt-4">Summary</h4>
            <ul class="list-group mt-3">
                <li class="list-group-item d-flex justify-content-between">
                    <span>Energy Charge</span>
                    <strong>₦ {{ energy_total }}</strong>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                    <span>VAT (7.5%)</span>
                    <strong>₦ {{ vat }}</strong>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                    <span>Fixed Charge</span>
                    <strong>₦ {{ fixed_charge }}</strong>
                </li>
                <li class="list-group-item d-flex justify-content-between bg-dark text-white">
                    <span>Total Payable</span>
                    <strong>₦ {{ grand_total }}</strong>
                </li>
            </ul>

            <!-- PDF Download Button -->
            <div class="mt-3 text-end">
                <a href="{{ url_for('download_pdf') }}?energy_total={{ energy_total }}&vat={{ vat }}&fixed_charge={{ fixed_charge }}&grand_total={{ grand_total }}"
                   class="btn btn-dark px-4"

                   Download PDF Invoice
                </a>
            </div>

        </div>
        {% endif %}

    </div>
</div>

<!-- Dark Mode Script -->
<script>
function toggleDarkMode() {
    document.body.classList.toggle("dark-mode");
}
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<footer class="position-fixed bottom-0 end-0 p-3 text-muted text-end">
    <small>
        © 2026 PowerBill Pro <br>
        Prepared by Okechukwu Favour
    </small>
</footer>


</body>

</html>

